<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640">

    <link rel="stylesheet" href="stylesheets/core.css" media="screen">
    <link rel="stylesheet" href="stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)">
    <link rel="stylesheet" href="stylesheets/github-light.css">

    <script type="text/javascript" src="javascripts/modernizr.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/headsmart.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#main_content').headsmart()
      })
    </script>
    <title>Shadowmanager by MagicNAT</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/MagicNAT/shadowmanager">View on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>Shadowmanager</h1>
            <h2>an extendible script to maintaince multiple shadowsocks server with different encryption method at a time.</h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <section id="downloads">
        <span class="inner">
          <a href="https://github.com/MagicNAT/shadowmanager/zipball/master" class="zip"><em>download</em> .ZIP</a><a href="https://github.com/MagicNAT/shadowmanager/tarball/master" class="tgz"><em>download</em> .TGZ</a>
        </span>
      </section>


      <span class="banner-fix"></span>


      <section id="main_content">
        <h2>
<a id="shadowmanager---a-shadowsocks-manager" class="anchor" href="#shadowmanager---a-shadowsocks-manager" aria-hidden="true"><span class="octicon octicon-link"></span></a>ShadowManager - A shadowsocks manager</h2>

<p>Copyright MagicNAT 2015</p>

<h3>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h3>

<p>ShadowManager is a lightweight, extendible script to maintaince multiple shadowsocks server with different encryption method at a time.</p>

<pre><code>usage: shadowmanager add &lt;port&gt; &lt;password&gt; &lt;method&gt;
                     start
                     stop
                     restart
                     status
                     show
                     remove &lt;id&gt;
                     enovr [overrides ...]
                     disovr [overrides ...]
                     edit &lt;server_id&gt; &lt;pass|port|method&gt; &lt;new_value&gt;
</code></pre>

<p>commands explained:</p>

<pre><code>add:     add a server to shadowmanager handler, accepting 3 parameters, port, password and method.
start:   start shadowmanager, no parameters required.
stop:    stop shadowmanager, no parameters required.
restart: restart shadowmanager, no parameters required.
status:  show shadowmanager running status, no parameters required.
show:    show all the servers handling, no parameters required.
remove:  remove server with given ID. Use "show" command to show all servers, accepting 1 parameter, server ID.
enovr:   enable one or more overrides, accepting override names as parameters (optional).
disovr:  disable one or more overrides, accepting override names as parameters (optional).
edit:    edit a shadowsocks server, accepting 3 paramaters, server ID, operation, and new value.
</code></pre>

<h3>
<a id="overrides-includes-and-hooks" class="anchor" href="#overrides-includes-and-hooks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overrides, Includes and Hooks</h3>

<p>To change the way that shadowmanager act which not able to be adjust in configure file, the overrides and includes might be needed. The former one read after the shdowmanager script loaded, the latter one read before it.</p>

<p>There are two chars before every override. They stand for override priority. The priority are ranked from 00 to zz, later the char, higher the priority.</p>

<p>Official overrides list:</p>

<pre><code>00-no-root: An override to disable root check by override root check function. Useful when needs to disable root check temporary.
10-base64-encrypted-passwd: Use base64 to store shadowsocks servers' passwords. This is useful when you need to some chars like ',' '(' or ')' in password.
20-json-to-shadowmanager: This override provides a command 'json2manager'. It enable user to convert shadowsocks json configure files to shadowmanager configure file.
30-generate-qr-code: Generate QR codes for servers in the shadowmanager.
40-randpass: Add a command 'add-randpass' to shadowmanager which enable users to add a shadowsocks server with random password.
50-supervisord-warp: the supervisord warp commnd, calling it will start shadowmanager, and stop shadowmanager when receive SIGINT or SIGTERM.
70-time-limit: Limit the time of each shadowsocks server can use in hours. This override will hooks pre-add events so make sure you are not using some override that remove pre-add events. Cronjob will be added to check the status and remove expired accounts.
90-pre-server-daemon: Use separated process to serve different servers. This is useful when you needs to stat the traffic of each server separately.
90-screen-start: This override change the original implement of the 'start' command. By using this override, the shadowsocks servers will be start using screen instead of running background as daemon. You might want to use this if you wants shadowsocks logs.
99-chinese-usage: This is an override that change the 'usage' command when the language is Chinese.
aa-wizard: Add a wizard to shadowmanager for adding servers, removing servers etc.
zz-interactive-mode: This makes shadowmanager run as an interactive shell. This is not recommend because it is not likely to work properly. However, this might be useful sometime.
</code></pre>

<p>And hooks are the function to be execute before or after certain actions. Those hooks can be define in hooks/. Some overrides might change the hooks as needed to archive some targets.</p>

<p>Hooks can also be add by the non-original implements. (i.e. overrides, includes, and even hooks itself!) </p>

<pre><code>usage: hook &lt;hooked_function&gt;
</code></pre>

<p>Hook command will check if the function is exist, and execute it if exist.</p>

<p>To make you usages and explanations into shadowmanager, use 'add-help' and 'add-usage'. Both two of them accept inputs from stdin. The language of help can be specify as the parameter of this two commands. If the language is not specified, it will be use as the default language (shows if preferred language can't be provide).</p>

<pre><code>usage: echo '   &lt;your-command&gt;: &lt;your-explaination&gt;' | add-help [help-language]
usage: echo '   &lt;your-command&gt;: command-name &lt;parameters&gt;' | add-usage [help-language]
</code></pre>

<h3>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h3>

<p>MIT License</p>
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>this project by <a href="https://github.com/MagicNAT">MagicNAT</a> can be found on <a href="https://github.com/MagicNAT/shadowmanager">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="https://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>

    
  </body>
</html>
